// Generated by CoffeeScript 1.6.3
(function() {
  (function(root, factory) {
    if (typeof exports === "object") {
      return module.exports = factory(require("depot"));
    } else if (typeof define === "function" && define.amd) {
      return define(["depot"], factory);
    } else {
      return root.emvy.localStore = factory(root.depot);
    }
  })(this, function(depot) {
    var localStore;
    localStore = function(name, create, update, destroy) {
      var store;
      store = depot(name, {
        idAttribute: "id"
      });
      return {
        create: function(id, model, cb) {
          store.save(model);
          return cb();
        },
        read: function(id, cb) {
          if (typeof id === "function") {
            return id(store.all());
          } else {
            return cb(store.get(id));
          }
        },
        update: function(id, model, cb) {
          store.update(id, model);
          return cb();
        },
        destroy: function(id, model, cb) {
          store.destroy(id);
          return cb();
        }
      };
    };
    return localStore;
  });

}).call(this);
